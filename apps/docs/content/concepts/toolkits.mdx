<span className="section-label">Concepts › III.</span>

# Toolkits

> *Reference:* [Toolkits](/reference/toolkit)

A toolkit is a collection of related tools that can be used by an agent. kernl supports two flavors:

| Flavor | Use case |
|--------|----------|
| `Toolkit` | Define tools as TypeScript functions |
| `MCPToolkit` | Connect to any MCP server |

## Toolkit

The standard toolkit. Define tools as TypeScript functions with full type safety.

```ts
import { tool, Toolkit } from "kernl";
import { z } from "zod";

const add = tool({
  id: "add",
  description: "Add two numbers",
  parameters: z.object({ a: z.number(), b: z.number() }),
  execute: async (ctx, { a, b }) => a + b,
});

const subtract = tool({
  id: "subtract",
  description: "Subtract two numbers",
  parameters: z.object({ a: z.number(), b: z.number() }),
  execute: async (ctx, { a, b }) => a - b,
});

export const math = new Toolkit({
  id: "math",
  description: "Basic arithmetic operations",
  tools: [add, subtract],
});
```

Use with an agent:

```ts
const agent = new Agent({
  id: "calculator",
  model: anthropic("claude-sonnet-4-5"),
  instructions: "You are a calculator.",
  toolkits: [math],
});
```

## MCPToolkit

Connect to any [Model Context Protocol](https://modelcontextprotocol.io) server. Use tools from the ecosystem without writing integration code.

```ts
import { MCPToolkit, MCPServerStreamableHttp } from "kernl";

export const github = new MCPToolkit({
  id: "github",
  description: "GitHub connector via GitHub Copilot MCP",
  server: new MCPServerStreamableHttp({
    url: "https://api.githubcopilot.com/mcp/",
    requestInit: {
      headers: {
        Authorization: `Bearer ${process.env.GITHUB_TOKEN}`,
      },
    },
  }),
});
```

MCPToolkit handles connection lifecycle automatically — connects lazily on first tool request, and cleans up via `destroy()`.

### Server types

| Server | Transport | MCP Protocol |
|--------|-----------|--------------|
| `MCPServerStreamableHttp` | HTTP with streaming | 2025-03-26 (recommended) |
| `MCPServerSSE` | Server-Sent Events | 2024-11-05 (legacy) |
| `MCPServerStdio` | Stdio | For local processes |

Most modern MCP servers support the streamable HTTP protocol. Use `MCPServerSSE` only for servers that haven't upgraded yet.

### Filtering tools

You can filter which tools are exposed based on context:

```ts
const github = new MCPToolkit({
  id: "github",
  server: new MCPServerStreamableHttp({ ... }),
  filter: async (ctx, tool) => {
    // Only allow read operations for certain users
    if (ctx.context.role !== "admin") {
      return tool.id.startsWith("get_") || tool.id.startsWith("list_");
    }
    return true;
  },
});
```

## Toolkit Registry

Pre-built toolkits you can add with one command.

> Browse available toolkits at [kernl.sh/marketplace](https://www.kernl.sh/marketplace).

### Adding a toolkit

```bash
kernl add toolkit github
kernl add toolkit linear
```

This will:
1. Download the toolkit source to your `toolkits/` directory
2. Install required dependencies
3. Show any environment variables you need to configure

### Multiple toolkits

```bash
kernl add toolkit github linear
```

### Using added toolkits

After adding, import and use like any other toolkit:

```ts
import { github } from "@/toolkits/github";
import { linear } from "@/toolkits/linear";

const agent = new Agent({
  id: "assistant",
  model: anthropic("claude-sonnet-4-5"),
  toolkits: [github, linear],
});
```

## When to use which

| Scenario | Choice |
|----------|--------|
| Custom business logic | `Toolkit` |
| Integration with external service via MCP | `MCPToolkit` |
| Quick start with common services | Toolkit Registry |
| Full control over tool implementation | `Toolkit` |
| Leverage existing MCP ecosystem | `MCPToolkit` |
